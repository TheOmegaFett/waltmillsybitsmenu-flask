<!DOCTYPE html>
<html>
  <head>
    <title>Stream Overlay</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: rgba(0, 0, 0, 0.1);
      }
      #fire-gif {
        display: none;
        width: 100%;
        max-width: 500px;
      }
      #status {
        color: lightgreen;
        font-family: Arial;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div id="status">Waiting for bits...</div>
    <img
      id="fire-gif"
      src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif"
    />

    <script>
      const ws = new WebSocket(
        "wss://waltmillsybitsmenu-flask.onrender.com/ws"
      );
      const fireGif = document.getElementById("fire-gif");
      const status = document.getElementById("status");

      ws.onmessage = (event) => {
        if (event.data === "show_fire") {
          status.textContent = "GIF triggered!";
          fireGif.style.display = "block";
          setTimeout(() => {
            fireGif.style.display = "none";
            status.textContent = "Waiting for bits...";
          }, 5000);
        }
      };

      ws.onopen = () => {
        status.textContent = "Connected to server!";
      };

      ws.onclose = () => {
        status.textContent = "Disconnected - reconnecting...";
        setTimeout(() => {
          window.location.reload();
        }, 5000);
      };
    </script>
  </body>
</html>
